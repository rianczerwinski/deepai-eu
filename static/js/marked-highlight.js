!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).markedHighlight={})}(this,function(t){"use strict";function e(t){return(t||"").match(/\S*/)[0]}function n(t){return e=>{"string"==typeof e&&e!==t.text&&(t.escaped=!0,t.text=e)}}let i=/[&<>"']/,r=RegExp(i.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,h=RegExp(o.source,"g"),g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=t=>g[t];function f(t,e){if(e){if(i.test(t))return t.replace(r,c)}else if(o.test(t))return t.replace(h,c);return t}t.markedHighlight=function t(i){if("function"==typeof i&&(i={highlight:i}),!i||"function"!=typeof i.highlight)throw Error("Must provide highlight function");return"string"!=typeof i.langPrefix&&(i.langPrefix="language-"),{async:!!i.async,walkTokens(t){if("code"!==t.type)return;let r=e(t.lang);if(i.async)return Promise.resolve(i.highlight(t.text,r,t.lang||"")).then(n(t));let o=i.highlight(t.text,r,t.lang||"");if(o instanceof Promise)throw Error("markedHighlight is not set to async but the highlight function is async. Set the async option to true on markedHighlight to await the async highlight function.");n(t)(o)},renderer:{code(t,n,r){let o=e(n),h=o?` class="${i.langPrefix}${f(o)}"`:"";return t=t.replace(/\n$/,""),`<pre><code${h}>${r?t:f(t,!0)}
</code></pre>`}}}}});