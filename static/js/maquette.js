!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).maquette={})}(this,function(e){"use strict";var t,r,n="http://www.w3.org/",o="".concat(n,"2000/svg"),i="".concat(n,"1999/xlink"),d=[],a=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r},p=function(e,t){return e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties)},s=function(e){if("string"!=typeof e)throw Error("Style values must be strings")},c=function(e,t,r){if(""!==t.vnodeSelector){for(var n=r;n<e.length;n++)if(p(e[n],t))return n}return -1},f=function(e,t,r,n){var o=e[t];if(""!==o.vnodeSelector){var i=o.properties;if(!(i?void 0===i.key?i.bind:i.key:void 0)){for(var d=0;d<e.length;d++)if(d!==t&&p(e[d],o))throw{error:Error("".concat(r.vnodeSelector," had a ").concat(o.vnodeSelector," child ").concat("added"===n?n:"removed",", but there is now more than one. You must add unique key properties to make them distinguishable.")),parentNode:r,childNode:o}}}},u=function(e){if(e.properties){var t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},l=[],v=!1,h=function(e){(e.children||[]).forEach(h),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode,])},$=function(){v=!1,l.forEach(h),l.length=0},m=function(e){l.push(e),v||(v=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback($,{timeout:16}):setTimeout($,16))},g=function(e){var t=e.domNode;if(e.properties){var r=e.properties.exitAnimation;if(r){t.style.pointerEvents="none";var n=function(){t.parentNode&&(t.parentNode.removeChild(t),m(e))};r(t,n,e.properties);return}}t.parentNode&&(t.parentNode.removeChild(t),m(e))},y=function(e,t,r){if(t)for(var n=r.eventHandlerInterceptor,d=Object.keys(t),a=d.length,p=function(a){var p=d[a],c=t[p];if("className"===p)throw Error('Property "className" is not supported, use "class".');if("class"===p)x(e,c,!0);else if("classes"===p)for(var f=Object.keys(c),u=f.length,l=0;l<u;l++){var v=f[l];c[v]&&e.classList.add(v)}else if("styles"===p)for(var h=Object.keys(c),$=h.length,l=0;l<$;l++){var m=h[l],g=c[m];g&&(s(g),r.styleApplyer(e,m,g))}else if("key"!==p&&null!=c){var y,N=typeof c;"function"===N?(0===p.lastIndexOf("on",0)&&(n&&(c=n(p,c,e,t)),"oninput"===p)&&(y=c,c=function(e){y.apply(this,[e]),e.target["oninput-value"]=e.target.value}),e[p]=c):r.namespace===o?"href"===p?e.setAttributeNS(i,p,c):e.setAttribute(p,c):"string"===N&&"value"!==p&&"innerHTML"!==p?e.setAttribute(p,c):e[p]=c}},c=0;c<a;c++)p(c)},N=function(e,t,r){if(t)for(var n=0,o=t;n<o.length;n++)b(o[n],e,void 0,r)},_=function(e,t,r){N(e,t.children,r),t.text&&(e.textContent=t.text),y(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children,])},b=function(e,t,r,n){var i,d,p=0,s=e.vnodeSelector,c=t.ownerDocument;if(""===s)e.domNode?e.domNode.nodeValue=e.text:(d=e.domNode=c.createTextNode(e.text),void 0!==r?t.insertBefore(d,r):t.appendChild(d));else{for(var f=0;f<=s.length;++f){var u=s.charAt(f);if(f===s.length||"."===u||"#"===u){var l=s.charAt(p-1),v=s.slice(p,f);"."===l?d.classList.add(v):"#"===l?d.id=v:("svg"===v&&(n=a(n,{namespace:o})),void 0!==n.namespace?d=e.domNode=c.createElementNS(n.namespace,v):(d=e.domNode=e.domNode||((null===(i=e.properties)||void 0===i?void 0:i.is)?c.createElement(v,{is:e.properties.is}):c.createElement(v)),"input"===v&&e.properties&&void 0!==e.properties.type&&d.setAttribute("type",e.properties.type)),void 0!==r?t.insertBefore(d,r):d.parentNode!==t&&t.appendChild(d)),p=f+1}}_(d,e,n)}},x=function(e,t,r){t&&t.split(" ").forEach(function(t){t&&e.classList.toggle(t,r)})},S=function(e,t,r,n){if(r){for(var d=!1,a=Object.keys(r),p=a.length,c=0;c<p;c++){var f=a[c],u=r[f],l=t[f];if("class"===f)l!==u&&(x(e,l,!1),x(e,u,!0));else if("classes"===f)for(var v=e.classList,h=Object.keys(u),$=h.length,m=0;m<$;m++){var g=h[m],y=!!u[g];!!l[g]!==y&&(d=!0,y?v.add(g):v.remove(g))}else if("styles"===f)for(var N=Object.keys(u),_=N.length,m=0;m<_;m++){var b=N[m],S=u[b];S!==l[b]&&(d=!0,S?(s(S),n.styleApplyer(e,b,S)):n.styleApplyer(e,b,""))}else if(u||"string"!=typeof l||(u=""),"value"===f){var A=e[f];A!==u&&(e["oninput-value"]?A===e["oninput-value"]:u!==l)&&(e[f]=u,e["oninput-value"]=void 0),u!==l&&(d=!0)}else if(u!==l){var k=typeof u;"function"===k&&n.eventHandlerInterceptor||(n.namespace===o?"href"===f?e.setAttributeNS(i,f,u):e.setAttribute(f,u):"string"===k&&"innerHTML"!==f?"role"===f&&""===u?e.removeAttribute(f):e.setAttribute(f,u):e[f]!==u&&(e[f]=u),d=!0)}}return d}},A=function(e,r,n,o,i){if(n===o)return!1;n=n||d,o=o||d;for(var a,s=n.length,l=o.length,v=0,h=0,$=!1;h<l;){var m=v<s?n[v]:void 0,y=o[h];if(void 0!==m&&p(m,y))$=t(m,y,i)||$,v++;else{var N=c(n,y,v+1);if(N>=0){for(a=v;a<N;a++)g(n[a]),f(n,a,e,"removed");$=t(n[N],y,i)||$,v=N+1}else b(y,r,v<s?n[v].domNode:void 0,i),u(y),f(o,h,e,"added")}h++}if(s>v)for(a=v;a<s;a++)g(n[a]),f(n,a,e,"removed");return $};t=function(e,t,r){var n=e.domNode,i=!1;if(e===t)return!1;var d=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var p=n.ownerDocument.createTextNode(t.text);return n.parentNode.replaceChild(p,n),t.domNode=p,i=!0}t.domNode=n}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(r=a(r,{namespace:o})),e.text!==t.text&&(d=!0,void 0===t.text?n.removeChild(n.firstChild):n.textContent=t.text),t.domNode=n,d=A(t,n,e.children,t.children,r)||d,d=S(n,e.properties,t.properties,r)||d,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[n,r,t.vnodeSelector,t.properties,t.children,]);return d&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),i};var k=function(e,r){return{getLastRender:function(){return e},update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var o=e;e=n,t(o,n,r)},domNode:e.domNode}},w={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(e,t,r){"-"===t.charAt(0)?e.style.setProperty(t,r):e.style[t]=r}},C=function(e){return a(w,e)},E={create:function(e,t){return t=C(t),b(e,document.createElement("div"),void 0,t),k(e,t)},append:function(e,t,r){return r=C(r),b(t,e,void 0,r),k(t,r)},insertBefore:function(e,t,r){return r=C(r),b(t,e.parentNode,e,r),k(t,r)},merge:function(e,t,r){return r=C(r),t.domNode=e,_(e,t,r),k(t,r)},replace:function(e,t,r){return r=C(r),b(t,e.parentNode,e,r),e.parentNode.removeChild(e),k(t,r)}},L=function(e,t,r){for(var n=0,o=t.length;n<o;n++){var i,d=t[n];Array.isArray(d)?L(e,d,r):null!=d&&!1!==d&&("string"==typeof d&&(d={vnodeSelector:"",properties:void 0,children:void 0,text:(i=d).toString(),domNode:null}),r.push(d))}},I=function(e,t){for(var r=[];e&&e!==t;)r.push(e),e=e.parentNode;return r};r=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){return e.filter(t)[0]};var R=function(e,t){var n=e;return t.forEach(function(e){n=n&&n.children?r(n.children,function(t){return t.domNode===e}):void 0}),n},H=function(e,t,r){return function(e,t,r,o){return n};function n(n){r("domEvent",n);var o,i=t(),d=I(n.currentTarget,i.domNode);d.reverse();var a=R(i.getLastRender(),d);return e.scheduleRender(),a&&(o=a.properties["on".concat(n.type)].apply(a.properties.bind||this,arguments)),r("domEventProcessed",n),o}},T=function(e){var t,r,n=C(e),o=n.performanceLogger,i=!0,d=!1,a=[],p=[],s=function(e,r,i){var d,s=function(){return d};n.eventHandlerInterceptor=H(t,s,o),d=e(r,i(),n),a.push(d),p.push(i)},c=function(){if(r=void 0,i){i=!1,o("renderStart",void 0);for(var e=0;e<a.length;e++){var t=p[e]();o("rendered",void 0),a[e].update(t),o("patched",void 0)}o("renderDone",void 0),i=!0}};return t={renderNow:c,scheduleRender:function(){r||d||(r=requestAnimationFrame(c))},stop:function(){r&&(cancelAnimationFrame(r),r=void 0),d=!0},resume:function(){d=!1,i=!0,t.scheduleRender()},append:function(e,t){s(E.append,e,t)},insertBefore:function(e,t){s(E.insertBefore,e,t)},merge:function(e,t){s(E.merge,e,t)},replace:function(e,t){s(E.replace,e,t)},detach:function(e){for(var t=0;t<p.length;t++)if(p[t]===e)return p.splice(t,1),a.splice(t,1)[0];throw Error("renderFunction was not found")}}},B=function(){var e,t;return{invalidate:function(){t=void 0,e=void 0},result:function(r,n){if(e)for(var o=0;o<r.length;o++)e[o]!==r[o]&&(t=void 0);return t||(t=n(),e=r),t}}},q=function(e,t,r){var n=[],o=[];return{results:o,map:function(i){for(var d=i.map(e),a=o.slice(),p=0,s=0;s<i.length;s++){var c=i[s],f=d[s];if(f===n[p])o[s]=a[p],r(c,a[p],s),p++;else{for(var u=!1,l=1;l<n.length+1;l++){var v=(p+l)%n.length;if(n[v]===f){o[s]=a[v],r(i[s],a[v],s),p=v+1,u=!0;break}}u||(o[s]=t(c,s))}}o.length=i.length,n=d}}};e.createCache=B,e.createMapping=q,e.createProjector=T,e.dom=E,e.h=function e(t,r,n){var o,i;if(Array.isArray(r))n=r,r=void 0;else if(r&&("string"==typeof r||r.vnodeSelector)||n&&("string"==typeof n||n.vnodeSelector))throw Error("h called with invalid arguments");return n&&1===n.length&&"string"==typeof n[0]?o=n[0]:n&&(L(t,n,i=[]),0===i.length&&(i=void 0)),{vnodeSelector:t,properties:r,children:i,text:""===o?void 0:o,domNode:null}}});